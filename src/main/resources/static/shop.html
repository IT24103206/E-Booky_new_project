<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shop - E-BOOKY</title>
    <!-- Bootstrap CSS -->
    <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
            crossorigin="anonymous">
    <!-- Font Awesome -->
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link
            href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap"
            rel="stylesheet">
    <link rel="stylesheet" href="style/navbar.css">
    <link rel="stylesheet" href="style/shop.css">
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-dark fixed-top">
    <div class="container-fluid">
        <a class="navbar-brand" href="index.html">E-BOOKY</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav me-auto">
                <li class="nav-item">
                    <a class="nav-link "
                       href="index.html">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link active" href="shop.html">Shop</a>
                </li>
                <li class="nav-item"  id="login-btn">
                    <a class="nav-link"
                       href="login.html">Login</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link "
                       href="contactus.html">Contact</a>
                </li>
                <li class="nav-item" id="profile-btn">
                    <a class="nav-link "
                       href="profile.html">Profile</a>
                </li>
            </ul>
            <ul class="navbar-nav ms-auto">
                <li class="nav-item" id="logout-btn">
                    <a class="nav-link" href="index.html">Logout</a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<!-- Search Bar and Category Navigation -->
<div class="container">
    <div class="row">
        <div class="col-md-8">
            <div class="search-container">
                <input type="text" class="form-control search-input" id="search-input"
                       placeholder="Search...">
                <i class="fas fa-search search-icon"></i>
            </div>
        </div>
    </div>

    <div class="row mt-4">
        <div class="col-12">
            <div class="category-nav">
                <h3 class="mb-3">Browse Categories</h3>
                <div class="category-scroller">
                    <ul class="category-list nav">
                        <li class="category-item nav-item">
                            <a href="#popular"
                               class="category-link nav-link active">Popular
                                Books</a>
                        </li>
                        <li class="category-item nav-item">
                            <a href="#featured"
                               class="category-link nav-link">Featured
                                Products</a>
                        </li>
                        <li class="category-item nav-item">
                            <a href="#fiction"
                               class="category-link nav-link">Fiction
                                Books</a>
                        </li>
                        <li class="category-item nav-item">
                            <a href="#scifi"
                               class="category-link nav-link">Sci-Fi &
                                Fantasy</a>
                        </li>
                        <li class="category-item nav-item">
                            <a href="#mystery"
                               class="category-link nav-link">Mystery &
                                Thriller</a>
                        </li>
                        <li class="category-item nav-item">
                            <a href="#nonfiction"
                               class="category-link nav-link">Non-Fiction</a>
                        </li>
                        <li class="category-item nav-item">
                            <a href="#classics"
                               class="category-link nav-link">Classics</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="container-fluid mt-4">
    <!-- Popular Books Section -->
    <section id="popular" class="category-section">
        <div class="container">
            <h2 class="section-title">Popular Books</h2>
            <div class="row" id="popular-book-container">
                <!-- Product 1 -->
                <!--                <div class="col-lg-4 col-md-6 mb-4">-->
                <!--                    <div class="card h-100">-->
                <!--                        <div class="position-relative">-->
                <!--                                    <span-->
                <!--                                            class="badge bg-primary position-absolute top-0 start-0 m-2">New</span>-->
                <!--                            <img-->
                <!--                                    src="https://prodimage.images-bn.com/pimages/9781118008188_p1_v2_s600x595.jpg"-->
                <!--                                    class="card-img-top"-->
                <!--                                    alt="Design and Build Websites">-->
                <!--                        </div>-->
                <!--                        <div class="card-body">-->
                <!--                            <h5 class="card-title">Design and Build-->
                <!--                                Websites</h5>-->
                <!--                            <p class="text-muted">Web Development</p>-->
                <!--                            <p class="text-muted">by Jon Duckett</p>-->
                <!--                            <div-->
                <!--                                    class="d-flex justify-content-between align-items-center mt-auto">-->
                <!--                                <div>-->
                <!--                                            <span-->
                <!--                                                    class="text-decoration-line-through text-muted">Rs-->
                <!--                                                1049.99</span>-->
                <!--                                    <h5 class="text-primary mb-0">Rs-->
                <!--                                        999.99</h5>-->
                <!--                                </div>-->
                <!--                                <a-->
                <!--                                        href="payment.html?title=Design+and+Build+Websites&author=Jon+Duckett&price=999.99&image=https://prodimage.images-bn.com/pimages/9781118008188_p1_v2_s600x595.jpg&category=Web+Development"-->
                <!--                                        class="btn btn-primary">Add to-->
                <!--                                    Cart</a>-->
                <!--                            </div>-->
                <!--                        </div>-->
                <!--                    </div>-->
                <!--                </div>-->


            </div>
        </div>
    </section>

    <!-- Featured Products -->
    <section id="featured" class="category-section">
        <div class="container">
            <h2 class="section-title">Featured Products</h2>
            <div class="row">

            </div>
        </div>
    </section>

    <!-- Fiction Books Section -->
    <section id="fiction" class="category-section">
        <div class="container">
            <h2 class="section-title">Fiction Books</h2>
            <div class="row row-cols-1 row-cols-md-2 row-cols-lg-5 g-4" id="genre1">

            </div>
        </div>
    </section>

    <!-- Science Fiction & Fantasy Section -->
    <section id="scifi" class="category-section">
        <div class="container">
            <h2 class="section-title">Science Fiction &
                Fantasy</h2>
            <div
                    class="row row-cols-1 row-cols-md-2 row-cols-lg-5 g-4" id="genre2">

            </div>
        </div>
    </section>

    <!-- Mystery & Thriller Section -->
    <section id="mystery" class="category-section">
        <div class="container">
            <h2 class="section-title">Mystery & Thriller</h2>
            <div
                    class="row row-cols-1 row-cols-md-2 row-cols-lg-5 g-4" id="genre3">
                <!-- Book 10 -->
                <div class="col">
                    <div class="card h-100">
                        <img
                                src="C:\Users\user\Desktop\OOP web page\img\In cold blood.jpg"
                                class="card-img-top"
                                alt="In Cold Blood">
                        <div class="card-body">
                            <h5 class="card-title">In Cold
                                Blood</h5>
                            <p class="card-text">A true crime
                                novel detailing the brutal
                                murder of a Kansas family and
                                the investigation that
                                followed.</p>
                            <p class="text-muted">by Truman
                                Capote</p>
                            <div
                                    class="d-flex justify-content-between align-items-center mt-auto">
                                <h5 class="text-primary mb-0">Rs
                                    1150.00</h5>
                                <a
                                        href="payment.html?title=In+Cold+Blood&author=Truman+Capote&price=1150.00&image=C:\Users\user\Desktop\OOP web page\img\In cold blood.jpg&category=True+Crime"
                                        class="btn btn-outline-primary">Add
                                    to Cart</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Non-Fiction & Self-Help Section -->
    <section id="nonfiction" class="category-section">
        <div class="container">
            <h2 class="section-title">Non-Fiction &
                Self-Help</h2>
            <div
                    class="row row-cols-1 row-cols-md-2 row-cols-lg-5 g-4" id="genre4">
                <!-- Book 1 -->

            </div>
        </div>
    </section>

    <!-- Classic Literature Section -->
    <section id="classics" class="category-section">
        <div class="container">
            <h2 class="section-title">Classic Literature</h2>
            <div
                    class="row row-cols-1 row-cols-md-2 row-cols-lg-5 g-4" id="genre5">
                <!-- Book 1 -->
                <div class="col">
                    <div class="card h-100">
                        <img
                                src="C:\Users\user\Desktop\OOP web page\img\Moby dick.jpg"
                                class="card-img-top"
                                alt="Moby-Dick">
                        <div class="card-body">
                            <h5
                                    class="card-title">Moby-Dick</h5>
                            <p class="card-text">Captain Ahab's
                                obsessive quest for revenge
                                against the white whale,
                                exploring themes of fate and
                                obsession.</p>
                            <p class="text-muted">by Herman
                                Melville</p>
                            <div
                                    class="d-flex justify-content-between align-items-center mt-auto">
                                <h5 class="text-primary mb-0">Rs
                                    1500.00</h5>
                                <a
                                        href="payment.html?title=Moby-Dick&author=Herman+Melville&price=1500.00&image=images/moby-dick.jpg&category=Classic"
                                        class="btn btn-outline-primary">Add
                                    to Cart</a>
                            </div>
                        </div>
                    </div>
                </div>


            </div>
        </div>
    </section>
</div>

<div style="width: 100vw;height: 70vh;background-color: red;position: absolute;top: 25vh;display: none;" id="search-result-box">

</div>

<!-- Footer -->
<footer class="bg-dark text-white py-4 mt-5">
    <div class="container">
        <div class="row">
            <div class="col-md-4 mb-4 mb-md-0">
                <h5>About Us</h5>
                <p>E-BOOKY is your premier destination for books
                    and learning resources across all
                    genres.</p>
            </div>
            <div class="col-md-4 mb-4 mb-md-0">
                <h5>Quick Links</h5>
                <ul class="list-unstyled">
                    <li><a href="index.html"
                           class="text-white">Home</a></li>
                    <li><a href="shop.html"
                           class="text-white">Shop</a></li>
                    <li><a href="contact.html"
                           class="text-white">Contact</a></li>
                </ul>
            </div>
            <div class="col-md-4">
                <h5>Contact Info</h5>
                <p><i class="fas fa-envelope me-2"></i>
                    info@ebooky.com</p>
                <p><i class="fas fa-phone me-2"></i> +94 71 606
                    11##</p>
            </div>
        </div>
        <hr class="my-4">
        <div class="text-center">
            <p class="mb-0">&copy; 2023 E-BOOKY. All rights
                reserved.</p>
        </div>
    </div>
</footer>

<!-- Bootstrap JS -->
<script
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
<!-- Custom JS -->
<script>
    // Add active class to current page link and category links
    document.addEventListener('DOMContentLoaded', function() {
        const currentPage = window.location.pathname.split('/').pop();
        const navLinks = document.querySelectorAll('.nav-link');
        const categoryLinks = document.querySelectorAll('.category-link');

        // Set active nav link
        navLinks.forEach(link => {
            if (link.getAttribute('href') === currentPage) {
                link.classList.add('active');
            }

            link.addEventListener('click', function() {
                navLinks.forEach(l => l.classList.remove('active'));
                this.classList.add('active');
            });
        });

        // Smooth scrolling for category links
        categoryLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();

                // Remove active class from all category links
                categoryLinks.forEach(l => l.classList.remove('active'));

                // Add active class to clicked link
                this.classList.add('active');

                // Scroll to the target section
                const targetId = this.getAttribute('href');
                const targetSection = document.querySelector(targetId);
                if (targetSection) {
                    targetSection.scrollIntoView({
                        behavior: 'smooth'
                    });
                }
            });
        });
    });
</script>
<script src="js/loginValid.js"></script>
<!--<script src="js/getBooks.js"></script>-->
<script>
    const popularBookContainer = document.getElementById("popular-book-container");
    const featureProduct = document.getElementById("");
    const genre1 = document.getElementById("genre1");
    const genre2 = document.getElementById("genre2");
    const genre3 = document.getElementById("genre3");
    const genre4 = document.getElementById("genre4");
    const genre5 = document.getElementById("genre5");
    const search = document.getElementById("search-input");
    const searchResult = document.getElementById("search-result-box")

    search.addEventListener("input",(e)=>{
        e.preventDefault();
        const search = searchResult.value;
        searchResult.style.display = "block";
    })


    let books = [];
    document.addEventListener("DOMContentLoaded",async ()=>{
        const response = await fetch("/books",{
            method:"get",
            credentials:"include",
        });

        if(!response.ok) throw new Error("Network Error");

        const data = await response.json();
        books = data;
        let popularBook = [];
        if(books.length>0){
            popularBook = books.slice(0,3)
            displayPopularBook(popularBook);
        }
        displayContaierBooks(genre1,"Programming")
        displayContaierBooks(genre2,"Web Development")
        displayContaierBooks(genre3,"Software Engineering")
        displayContaierBooks(genre4,"Data Science")
        displayContaierBooks(genre5,"DevOps")
    })

    function displayPopularBook(books){
        popularBookContainer.innerHTML = "";
        books.forEach(b=>{
            const element = `<div class="col-lg-4 col-md-6 mb-4">
                    <div class="card h-100">
                        <div class="position-relative">
                                    <span
                                            class="badge bg-primary position-absolute top-0 start-0 m-2">New</span>

                            <img
                                    src=${b.coverPage}
                                    class="card-img-top"
                                    alt="Python for Data Analysis">
                        </div>
                        <div class="card-body">
                            <h5 class="card-title">${b.title}</h5>
                            <p class="text-muted">${b.description.substring(0, 20)}...</p>
                            <p class="text-muted">by ${b.author}</p>
                            <div
                                    class="d-flex justify-content-between align-items-center mt-auto">
                                <div>

                                    <h5 class="text-primary mb-0">Rs ${b.price}.00</h5>
                                </div>
                                <a
                                        href="payment.html?title=Python+for+Data+Analysis&author=Wes+McKinney&price=1799.99&image=https://img.ebook-hunter.org/img/Python%20for%20Data%20Analysis%2C%203rd%20Edition%20by%20Wes%20McKinney.jpg&category=Data+Science"
                                        class="btn btn-primary">Add to
                                    Cart</a>
                            </div>
                        </div>
                    </div>
                </div>`;

            popularBookContainer.innerHTML += element;
        })
    }

    function displayContaierBooks(container,genre){
        container.innerHTML =  ``;
        console.log(books.filter(f=>f.genre===genre));
        books.forEach(b=>{
            if(b.genre===genre){
                const element = `<a class="col" href="book.html?title=${encodeURIComponent(b.title)}">
                    <div class="card h-100">
                        <img
                                src=${b.coverPage}
                                class="card-img-top"
                                alt=${b.title}>
                        <div class="card-body">
                            <h5
                                    class="card-title">${b.title}</h5>
                            <p class="card-text">
                                  ${b.description && b.description.length > 100
                    ? b.description.substring(0, 100) + "..."
                    : b.description || ""}
                                </p>
                            <p class="text-muted">by ${b.author}</p>
                            <div
                                    class="d-flex justify-content-between align-items-center mt-auto">
                                <h5 class="text-primary mb-0">Rs ${b.price}</h5>
                            </div>
                        </div>
                    </div>
                </a>`;
                container.innerHTML += element;
            }
        })
    }
</script>
</body>
</html>
